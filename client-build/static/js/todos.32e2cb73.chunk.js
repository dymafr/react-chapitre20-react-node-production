(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{72:function(t,e,n){"use strict";n.r(e);var o=n(9),a=n(10),r=n(12),c=n(11),u=n(13),d=n(1),i=n.n(d),s=n(75),l=n(76),m=n(73),f=n(14),b=n(49).create({baseURL:"http://localhost:3000/"}),p=function(t){return{type:"add todo success",todo:t}},h=function(t){return{type:"add todo error",error:t}},j=function(t){return{type:"edit to do success",todo:t}},O=function(t){return{type:"edit to do error",error:t}},y=function(t){return{type:"delete todo success",id:t}},E=function(t){return{type:"delete todo error",err:t}},v=function(t){function e(t){var n;return Object(o.a)(this,e),(n=Object(r.a)(this,Object(c.a)(e).call(this,t))).submitTodo=function(){n.props.tryAddTodo({name:n.input.current.value,done:!1}),n.input.current.value=""},n.input=i.a.createRef(),n}return Object(u.a)(e,t),Object(a.a)(e,[{key:"render",value:function(){return i.a.createElement("div",{className:"d-flex mb-4"},i.a.createElement("input",{ref:this.input,type:"text",className:"form-control mr-5"}),i.a.createElement("button",{onClick:this.submitTodo,className:"btn btn-success"}," Ajouter "))}}]),e}(d.Component),g=Object(f.b)(null,function(t){return{dispatch:t,tryAddTodo:function(e){return t(function(t){return function(e){return b.post("/api/todos",t).then(function(t){return e(p(t.data))},function(t){return e(h(t))})}}(e))}}})(v),N=n(16),T=function(t){function e(t){var n;return Object(o.a)(this,e),(n=Object(r.a)(this,Object(c.a)(e).call(this,t))).edit=function(t){n.setState({edit:t})},n.handleInput=function(t){var e=n.state.todo;n.setState({todo:Object(N.a)({},e,{newname:t.target.value})})},n.updateTodo=function(t){n.props.tryEditTodo(Object(N.a)({},t)),n.state.edit&&n.setState({edit:!1})},n.state={edit:!1,todo:Object(N.a)({},n.props.todo,{newname:n.props.todo.name})},n}return Object(u.a)(e,t),Object(a.a)(e,[{key:"render",value:function(){var t=this,e=this.props.tryDeleteTodo,n=this.state.todo;return i.a.createElement("li",{className:"list-group-item d-flex flex-row justify-content-between align-items-center"},this.state.edit?i.a.createElement("input",{value:n.newname,type:"text",onChange:this.handleInput,className:"form-control"}):i.a.createElement("span",null,n.name),this.state.edit?i.a.createElement(d.Fragment,null,i.a.createElement("button",{className:"btn btn-sm btn-secondary mx-3",onClick:function(){return t.updateTodo(Object(N.a)({},n))}},"Sauvegarder"),i.a.createElement("button",{className:"btn btn-sm btn-secondary",onClick:function(){return t.edit(!1)}},"Annuler")):i.a.createElement("span",null,i.a.createElement("input",{className:"mx-3",checked:this.state.todo.done,onChange:function(){t.updateTodo(Object(N.a)({},t.state.todo,{done:!t.state.todo.done}))},type:"checkbox"}),i.a.createElement("button",{onClick:e,className:"btn btn-sm btn-danger mx-3"},"delete"),i.a.createElement("button",{onClick:function(){return t.edit(!0)},className:"btn btn-sm btn-primary"},"Edit")))}}],[{key:"getDerivedStateFromProps",value:function(t,e){if(t.todo!==e.todo)return{todo:Object(N.a)({},e.todo,t.todo)}}}]),e}(i.a.Component),k=n(69),w=Object(k.a)([function(t){return t.todos}],function(t){return t?t.data:null}),x=Object(k.a)([function(t,e){return e},w],function(t,e){if(e&&t)switch(t){case"done":return e.filter(function(t){return t.done});case"active":return e.filter(function(t){return!t.done});default:return e}}),C=function(t){function e(t){var n;return Object(o.a)(this,e),n=Object(r.a)(this,Object(c.a)(e).call(this,t)),t.fetchTodo(),n}return Object(u.a)(e,t),Object(a.a)(e,[{key:"render",value:function(){var t=this.props,e=t.todos,n=t.tryDeleteTodo,o=t.tryEditTodo;return i.a.createElement("ul",{className:"list-group"},e&&e.map(function(t,e){return i.a.createElement(T,{key:t._id,todo:t,tryDeleteTodo:function(){return n(t._id)},tryEditTodo:function(t){return o(t)}})}))}}]),e}(d.Component),_=Object(f.b)(function(t,e){var n=e.match.params.filter;return{todos:x(t,n)}},{tryDeleteTodo:function(t){return function(e){return b.delete("/api/todos/".concat(t)).then(function(n){return e(y(t))},function(t){return e(E(t))})}},fetchTodo:function(){return function(t){return t({type:"request todo"}),b.get("/api/todos").then(function(e){t({type:"fetch todo success",todos:e.data})},function(e){t(function(t){return{type:"fetch todo error",error:t}}(e))})}},tryEditTodo:function(t){return function(e){return b.put("/api/todos",{_id:t._id,name:t.newname,done:t.done}).then(function(t){return e(j(t.data))},function(t){return e(O(t))})}}})(C),D=n(71),A=function(t){return i.a.createElement(i.a.Fragment,null,i.a.createElement(D.a,{to:"/todos/all",className:"btn btn-primary mr-2"},"Tout"),i.a.createElement(D.a,{to:"/todos/done",className:"btn btn-primary mr-2"},"Fini"),i.a.createElement(D.a,{to:"/todos/active",className:"btn btn-primary"},"En cours"))},F=n(21),S=n(70);Object(F.b)("todos",function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:[],loading:!1,error:null},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"add todo success":return Object(N.a)({},t,{data:[].concat(Object(S.a)(t.data),[e.todo])});case"add todo error":return Object(N.a)({},t,{error:e.error});case"delete todo success":return Object(N.a)({},t,{data:t.data.filter(function(t){return t._id!==e.id})});case"request todo":return Object(N.a)({},t,{loading:!0});case"edit to do success":var n=e.todo;console.log({actiontodo:n,stateData:t.data});var o=Object(S.a)(t.data).map(function(t){return t._id===n._id?n:t});return Object(N.a)({},t,{data:Object(S.a)(o)});case"fetch todo success":return e.todos?Object(N.a)({},t,{data:Object(S.a)(e.todos),loading:!1,error:null}):Object(N.a)({},t,{loading:!1});case"edit to do error":case"delete todo error":case"fetch todo error":return Object(N.a)({},t,{loading:!1,error:e.error});default:return t}});var q=function(t){function e(){return Object(o.a)(this,e),Object(r.a)(this,Object(c.a)(e).apply(this,arguments))}return Object(u.a)(e,t),Object(a.a)(e,[{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement("h4",null,"Ajouter une todo"),i.a.createElement("hr",{className:"my-4"}),i.a.createElement(g,null),i.a.createElement("hr",{className:"my-4"}),i.a.createElement("div",{className:"card"},i.a.createElement("div",{className:"card-header d-flex flex-row align-items-center"},i.a.createElement("span",{className:"flex-fill"},"Todo list"),i.a.createElement(A,null)),i.a.createElement("div",{className:"card-body"},i.a.createElement(s.a,null,i.a.createElement(l.a,{path:"/todos/:filter",component:_}),i.a.createElement(m.a,{to:"/todos/all"})))))}}]),e}(d.Component);e.default=q}}]);
//# sourceMappingURL=todos.32e2cb73.chunk.js.map